\hypertarget{classradio_1_1Modulator}{\section{radio\+:\+:Modulator Class Reference}
\label{classradio_1_1Modulator}\index{radio\+::\+Modulator@{radio\+::\+Modulator}}
}


{\ttfamily \#include $<$Modulator.\+hpp$>$}

\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classradio_1_1Modulator_ab202651b368986cc76673b6e997550b8}{Modulator} (\hyperlink{definitions_8hpp_aacdc525d6f7bddb3ae95d5c311bd06a1}{float32} data\mbox{[}$\,$\mbox{]}, \hyperlink{definitions_8hpp_a1134b580f8da4de94ca6b1de4d37975e}{uint32} size, \hyperlink{namespaceradio_a46fb7299001138f28b7f69975c58399e}{Modulation\+Type} type, \hyperlink{definitions_8hpp_aacdc525d6f7bddb3ae95d5c311bd06a1}{float32} freq\+Inter=\hyperlink{namespaceradio_aa82ddc6ba206798fd70ffc25665b3cb6}{F\+R\+E\+Q\+\_\+\+I\+N\+T\+E\+R\+M\+E\+D\+I\+A\+T\+E}, \hyperlink{definitions_8hpp_a1134b580f8da4de94ca6b1de4d37975e}{uint32} rate=\hyperlink{namespaceradio_a284213fea4beed2f74bb936927cbe654}{S\+A\+M\+P\+L\+I\+N\+G\+\_\+\+R\+A\+T\+E})
\item 
\hyperlink{classradio_1_1Modulator_a712e6e110c57b29ebdd754bd34bf269b}{$\sim$\+Modulator} ()
\item 
void \hyperlink{classradio_1_1Modulator_ab5eac6e4900579486b5871b48e64cdab}{Mod} ()
\end{DoxyCompactItemize}


\subsection{Detailed Description}
This class, while not intended to be called directly, is a superclass for the classes of the modulation forms used in this project. 

Definition at line \hyperlink{Modulator_8hpp_source_l00039}{39} of file \hyperlink{Modulator_8hpp_source}{Modulator.\+hpp}.



\subsection{Constructor \& Destructor Documentation}
\hypertarget{classradio_1_1Modulator_ab202651b368986cc76673b6e997550b8}{\index{radio\+::\+Modulator@{radio\+::\+Modulator}!Modulator@{Modulator}}
\index{Modulator@{Modulator}!radio\+::\+Modulator@{radio\+::\+Modulator}}
\subsubsection[{Modulator}]{\setlength{\rightskip}{0pt plus 5cm}radio\+::\+Modulator\+::\+Modulator (
\begin{DoxyParamCaption}
\item[{{\bf float32}}]{data\mbox{[}$\,$\mbox{]}, }
\item[{{\bf uint32}}]{size, }
\item[{{\bf Modulation\+Type}}]{type, }
\item[{{\bf float32}}]{freq\+Inter = {\ttfamily {\bf F\+R\+E\+Q\+\_\+\+I\+N\+T\+E\+R\+M\+E\+D\+I\+A\+T\+E}}, }
\item[{{\bf uint32}}]{rate = {\ttfamily {\bf S\+A\+M\+P\+L\+I\+N\+G\+\_\+\+R\+A\+T\+E}}}
\end{DoxyParamCaption}
)}}\label{classradio_1_1Modulator_ab202651b368986cc76673b6e997550b8}
Creates a \hyperlink{classradio_1_1Modulator}{Modulator} with the specified parameters. Intended to be called only by subclasses.


\begin{DoxyParams}{Parameters}
{\em freq\+Inter} & the frequency of the I\+F carrier sinusoid\\
\hline
{\em rate} & the sampling rate of the baseband and I\+F signals\\
\hline
{\em data} & the array holding initially the baseband signal\\
\hline
{\em size} & the number of elements in data\\
\hline
{\em type} & form of modulation to use \\
\hline
\end{DoxyParams}


Definition at line \hyperlink{Modulator_8hpp_source_l00103}{103} of file \hyperlink{Modulator_8hpp_source}{Modulator.\+hpp}.


\begin{DoxyCode}
00104                                             \{
00105         freqCarrier = freqInter;
00106         this->rate = rate;
00107         this->data = data;
00108         this->size = size;
00109         this->type = type;
00110 
00111         \textcolor{keywordflow}{if}(type == \hyperlink{namespaceradio_a46fb7299001138f28b7f69975c58399ea1b14284e455bf5c311de662665312d13}{ModulationType::USB\_HILBERT}
00112                 || type == \hyperlink{namespaceradio_a46fb7299001138f28b7f69975c58399ea18f970daa5b5a8f72cbd45f7b49a6b6a}{ModulationType::LSB\_HILBERT}) \{
00113             hilData = (\hyperlink{definitions_8hpp_aacdc525d6f7bddb3ae95d5c311bd06a1}{float32}*)malloc(size*\textcolor{keyword}{sizeof}(\hyperlink{definitions_8hpp_aacdc525d6f7bddb3ae95d5c311bd06a1}{float32}));
00114         \}
00115     \}
\end{DoxyCode}
\hypertarget{classradio_1_1Modulator_a712e6e110c57b29ebdd754bd34bf269b}{\index{radio\+::\+Modulator@{radio\+::\+Modulator}!````~Modulator@{$\sim$\+Modulator}}
\index{````~Modulator@{$\sim$\+Modulator}!radio\+::\+Modulator@{radio\+::\+Modulator}}
\subsubsection[{$\sim$\+Modulator}]{\setlength{\rightskip}{0pt plus 5cm}radio\+::\+Modulator\+::$\sim$\+Modulator (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classradio_1_1Modulator_a712e6e110c57b29ebdd754bd34bf269b}


Definition at line \hyperlink{Modulator_8hpp_source_l00117}{117} of file \hyperlink{Modulator_8hpp_source}{Modulator.\+hpp}.


\begin{DoxyCode}
00117                           \{
00118         \textcolor{keywordflow}{if}(hilData != \textcolor{keyword}{nullptr}) free(hilData);
00119     \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\hypertarget{classradio_1_1Modulator_ab5eac6e4900579486b5871b48e64cdab}{\index{radio\+::\+Modulator@{radio\+::\+Modulator}!Mod@{Mod}}
\index{Mod@{Mod}!radio\+::\+Modulator@{radio\+::\+Modulator}}
\subsubsection[{Mod}]{\setlength{\rightskip}{0pt plus 5cm}void radio\+::\+Modulator\+::\+Mod (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classradio_1_1Modulator_ab5eac6e4900579486b5871b48e64cdab}
Modulates the audio currently in the data array. 

Definition at line \hyperlink{Modulator_8hpp_source_l00121}{121} of file \hyperlink{Modulator_8hpp_source}{Modulator.\+hpp}.


\begin{DoxyCode}
00121                         \{
00122         \textcolor{comment}{// these variables should only ever be created once}
00123         \textcolor{keyword}{static} \hyperlink{definitions_8hpp_aacdc525d6f7bddb3ae95d5c311bd06a1}{float32} fmArg = 2 * M\_PI * freqCarrier / (\hyperlink{definitions_8hpp_aacdc525d6f7bddb3ae95d5c311bd06a1}{float32})rate;
00124         \textcolor{keyword}{static} \hyperlink{definitions_8hpp_aacdc525d6f7bddb3ae95d5c311bd06a1}{float32} fmK = 2 * M\_PI / rate;
00125         \textcolor{keyword}{static} \hyperlink{definitions_8hpp_aacdc525d6f7bddb3ae95d5c311bd06a1}{float32} fmSum = 0;  \textcolor{comment}{// cummulative sum used in FM modulation}
00126         \textcolor{keyword}{static} Filter lsbFilter(data, size, \hyperlink{namespaceradio_a0ffd57d5a11ff70a1f55dbdc8ebe098d}{F\_LOWERSIDEBAND});
00127         \textcolor{keyword}{static} Sinusoid sinusoid(freqCarrier, rate);  \textcolor{comment}{// IF carrier sinusoid}
00128         \textcolor{keyword}{static} Filter usbFilter(data, size, \hyperlink{namespaceradio_a0ec4548711b6d6ed6867c70b3fc2a413}{F\_UPPERSIDEBAND});
00129 
00130         \textcolor{comment}{// take hilbert transform if necessary}
00131         \textcolor{keywordflow}{if}(type == \hyperlink{namespaceradio_a46fb7299001138f28b7f69975c58399ea1b14284e455bf5c311de662665312d13}{ModulationType::USB\_HILBERT}
00132                 || type == \hyperlink{namespaceradio_a46fb7299001138f28b7f69975c58399ea18f970daa5b5a8f72cbd45f7b49a6b6a}{ModulationType::LSB\_HILBERT}) \{
00133             \hyperlink{namespaceradio_a285a47b4ed81e5662d2b6b4bae0188d0}{hilbert}(data, hilData, size);
00134         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(type == \hyperlink{namespaceradio_a46fb7299001138f28b7f69975c58399ea7b4b1e7876b8d9de5b77b9264fbe556a}{ModulationType::FM\_NARROW}) \{
00135             fmK *= 2.5;
00136         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(type == \hyperlink{namespaceradio_a46fb7299001138f28b7f69975c58399eafabee3b32b363b14950cb5f5b61e998c}{ModulationType::FM\_WIDE}) \{
00137             fmK *= 5;
00138         \}
00139 
00140         \textcolor{comment}{// perform main modulation}
00141         \textcolor{keywordflow}{for}(\hyperlink{definitions_8hpp_a1134b580f8da4de94ca6b1de4d37975e}{uint32} i = 0; i < size; i++) \{
00142             \textcolor{keywordflow}{switch}(type) \{
00143                 \textcolor{keywordflow}{case} \hyperlink{namespaceradio_a46fb7299001138f28b7f69975c58399eaf180dafbc98f54c6382ae29243cec902}{ModulationType::DSB\_LC}:
00144                     data[i] = ((data[i] + 1) * sinusoid.next()) / 2;
00145                     \textcolor{keywordflow}{break};
00146 
00147                 \textcolor{keywordflow}{case} \hyperlink{namespaceradio_a46fb7299001138f28b7f69975c58399ea92c257208ae8b0c6d88c80abcf15ec31}{ModulationType::DSB\_SC}:
00148                 \textcolor{keywordflow}{case} \hyperlink{namespaceradio_a46fb7299001138f28b7f69975c58399ea9d8eca0470206cddb0dd0297717eb876}{ModulationType::USB\_FILTERED}:
00149                 \textcolor{keywordflow}{case} \hyperlink{namespaceradio_a46fb7299001138f28b7f69975c58399eaa6fd9ffa81c9d5e4a255b0c3b2336bd8}{ModulationType::LSB\_FILTERED}:
00150                     data[i] = data[i] * sinusoid.next();
00151                     \textcolor{keywordflow}{break};
00152 
00153                 \textcolor{keywordflow}{case} \hyperlink{namespaceradio_a46fb7299001138f28b7f69975c58399ea1b14284e455bf5c311de662665312d13}{ModulationType::USB\_HILBERT}:
00154                     data[i] = data[i] * sinusoid.next()
00155                         - hilData[i] * sinusoid.nextShifted();
00156                     \textcolor{keywordflow}{break};
00157 
00158                 \textcolor{keywordflow}{case} \hyperlink{namespaceradio_a46fb7299001138f28b7f69975c58399ea18f970daa5b5a8f72cbd45f7b49a6b6a}{ModulationType::LSB\_HILBERT}:
00159                     data[i] = data[i] * sinusoid.next()
00160                         + hilData[i] * sinusoid.nextShifted();
00161                     \textcolor{keywordflow}{break};
00162 
00163                 \textcolor{keywordflow}{case} \hyperlink{namespaceradio_a46fb7299001138f28b7f69975c58399ea7b4b1e7876b8d9de5b77b9264fbe556a}{ModulationType::FM\_NARROW}:
00164                 \textcolor{keywordflow}{case} \hyperlink{namespaceradio_a46fb7299001138f28b7f69975c58399eafabee3b32b363b14950cb5f5b61e998c}{ModulationType::FM\_WIDE}:
00165                     fmSum += fmK * data[i];
00166                     data[i] = cos(fmArg * i + fmSum);
00167                     \textcolor{keywordflow}{break};
00168             \}
00169         \}
00170 
00171         \textcolor{comment}{// filter out a sideband if using filtered SSB modulation}
00172         \textcolor{keywordflow}{if}(type == \hyperlink{namespaceradio_a46fb7299001138f28b7f69975c58399eaa6fd9ffa81c9d5e4a255b0c3b2336bd8}{ModulationType::LSB\_FILTERED}) \{
00173             lsbFilter.Pass();
00174         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(type == \hyperlink{namespaceradio_a46fb7299001138f28b7f69975c58399ea9d8eca0470206cddb0dd0297717eb876}{ModulationType::USB\_FILTERED}) \{
00175             usbFilter.Pass();
00176         \}
00177     \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classradio_1_1Modulator_ab5eac6e4900579486b5871b48e64cdab_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=265pt]{classradio_1_1Modulator_ab5eac6e4900579486b5871b48e64cdab_icgraph}
\end{center}
\end{figure}




The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
src/\hyperlink{Modulator_8hpp}{Modulator.\+hpp}\end{DoxyCompactItemize}
